\hypertarget{layer_8h_source}{}\doxysection{layer.\+h}
\label{layer_8h_source}\index{src/engine/layer.h@{src/engine/layer.h}}
\mbox{\hyperlink{layer_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}../external\_include.h"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{event_8h}{event.h}}"{}}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{static}\ std::atomic\_int\ \mbox{\hyperlink{layer_8h_ac9e8408a6fc1cc2a3d3d0fc235b40577}{s\_layer\_id}};}
\DoxyCodeLine{00008\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_layer}{Layer}}\ \{}
\DoxyCodeLine{00009\ \ \ \ \ \textcolor{comment}{//\ TODO\ it\ would\ be\ great\ to\ do\ this\ here\ instead\ of\ in\ every\ sub\ layer\ but}}
\DoxyCodeLine{00010\ \ \ \ \ \textcolor{comment}{//\ theres\ some\ problem\ with\ including\ ui.h\ in\ here\ due\ to\ app.cpp}}
\DoxyCodeLine{00011\ \ \ \ \ \textcolor{comment}{//\ std::shared\_ptr<ui::UIContext>\ ui\_context;}}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_layer_ad8c4d484a5efce0cbbd0cf81b3958d17}{id}};}
\DoxyCodeLine{00013\ \ \ \ \ std::string\ \mbox{\hyperlink{struct_layer_a2071349b5667273725ae7f05a42db7a6}{name}};}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \ \ \ \ \mbox{\hyperlink{struct_layer_a1a34fba22edc963461e7033025d31cb2}{Layer}}(\textcolor{keyword}{const}\ std::string\&\ n\ =\ \textcolor{stringliteral}{"{}layer"{}})\ :\ \mbox{\hyperlink{struct_layer_ad8c4d484a5efce0cbbd0cf81b3958d17}{id}}(\mbox{\hyperlink{layer_8h_ac9e8408a6fc1cc2a3d3d0fc235b40577}{s\_layer\_id}}++),\ \mbox{\hyperlink{struct_layer_a2071349b5667273725ae7f05a42db7a6}{name}}(n)\ \{\}}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{struct_layer_a2bac093f2a650095a5551fc455d10dc5}{\string~Layer}}()\ \{\}}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_layer_a88bb97c131c409756e71f3f5db59f983}{onAttach}}()\ \{\}}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_layer_a3b780cc2b2576eb59e768407bd59d172}{onDetach}}()\ \{\}}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_layer_a48aac9e190e03beef1e02a34e8fefd0f}{onUpdate}}(\textcolor{keywordtype}{float}\ elapsed)\ =\ 0;}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_layer_a2e8efa32b1a8749dc24ddc07ea90f29b}{onDraw}}(\textcolor{keywordtype}{float}\ elapsed)\ =\ 0;}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_layer_a753e388bb8e7416a7cc2b338b5566396}{onEvent}}(\mbox{\hyperlink{struct_event}{Event}}\&\ event)\ \{}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_event_dispatcher}{EventDispatcher}}\ dispatcher(event);}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ dispatcher.\mbox{\hyperlink{struct_event_dispatcher_aaa084fba3bab5eb635066b00f1985c24}{dispatch}}<\mbox{\hyperlink{struct_key_pressed_event}{KeyPressedEvent}}>(}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \ \ \ \ std::bind(\&\mbox{\hyperlink{struct_layer_aaad763977a0828b342ddd6ac0af65aea}{Layer::onKeyPressed}},\ \textcolor{keyword}{this},\ std::placeholders::\_1));}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ dispatcher.\mbox{\hyperlink{struct_event_dispatcher_aaa084fba3bab5eb635066b00f1985c24}{dispatch}}<\mbox{\hyperlink{struct_gamepad_button_pressed_event}{GamepadButtonPressedEvent}}>(std::bind(}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{struct_layer_ad1793a53fff5c6516848d2a1a0c73a10}{Layer::onGamepadButtonPressed}},\ \textcolor{keyword}{this},\ std::placeholders::\_1));}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ dispatcher.\mbox{\hyperlink{struct_event_dispatcher_aaa084fba3bab5eb635066b00f1985c24}{dispatch}}<\mbox{\hyperlink{struct_gamepad_axis_moved_event}{GamepadAxisMovedEvent}}>(}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ std::bind(\&\mbox{\hyperlink{struct_layer_a4410643bde2d400ba6731f48ad5a8727}{Layer::onGamepadAxisMoved}},\ \textcolor{keyword}{this},\ std::placeholders::\_1));}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ dispatcher.\mbox{\hyperlink{struct_event_dispatcher_aaa084fba3bab5eb635066b00f1985c24}{dispatch}}<\mbox{\hyperlink{struct_char_pressed_event}{CharPressedEvent}}>(}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ std::bind(\&\mbox{\hyperlink{struct_layer_affe784562ca969d024bb98866455985d}{Layer::onCharPressedEvent}},\ \textcolor{keyword}{this},\ std::placeholders::\_1));}
\DoxyCodeLine{00032\ \ \ \ \ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_layer_aaad763977a0828b342ddd6ac0af65aea}{onKeyPressed}}(\mbox{\hyperlink{struct_key_pressed_event}{KeyPressedEvent}}\&)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_layer_ad1793a53fff5c6516848d2a1a0c73a10}{onGamepadButtonPressed}}(\mbox{\hyperlink{struct_gamepad_button_pressed_event}{GamepadButtonPressedEvent}}\&)\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00037\ \ \ \ \ \}}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_layer_a4410643bde2d400ba6731f48ad5a8727}{onGamepadAxisMoved}}(\mbox{\hyperlink{struct_gamepad_axis_moved_event}{GamepadAxisMovedEvent}}\&)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_layer_affe784562ca969d024bb98866455985d}{onCharPressedEvent}}(\mbox{\hyperlink{struct_char_pressed_event}{CharPressedEvent}}\&)\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ [[nodiscard]]\ \textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{struct_layer_a592dabab6ae280b7a3a3f4b195c9833b}{getname}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_layer_a2071349b5667273725ae7f05a42db7a6}{name}};\ \}}
\DoxyCodeLine{00042\ \};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_layer_stack}{LayerStack}}\ \{}
\DoxyCodeLine{00045\ \ \ \ \ std::vector<Layer*>\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}};}
\DoxyCodeLine{00046\ \ \ \ \ std::vector<Layer*>::iterator\ \mbox{\hyperlink{struct_layer_stack_a0b201eef23fdc7dfe9e2afc9ed018243}{insert}};}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ std::vector<Layer*>::iterator\ \mbox{\hyperlink{struct_layer_stack_abc1ae8816a9b21d405062502c0a98f5b}{begin}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.begin();\ \}}
\DoxyCodeLine{00049\ \ \ \ \ std::vector<Layer*>::iterator\ \mbox{\hyperlink{struct_layer_stack_a91c8a0dadf6f79e18d8f41e9572a7c7e}{end}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.end();\ \}}
\DoxyCodeLine{00050\ \ \ \ \ std::vector<Layer*>::reverse\_iterator\ \mbox{\hyperlink{struct_layer_stack_a8093e3ce5a241e709ed6082496548499}{rbegin}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.rbegin();\ \}}
\DoxyCodeLine{00051\ \ \ \ \ std::vector<Layer*>::reverse\_iterator\ \mbox{\hyperlink{struct_layer_stack_a232889117f5b4539e726d7a3b0cc9c9e}{rend}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.rend();\ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{struct_layer_stack_a9d94b74757162c077868bc6e09831317}{LayerStack}}()\ \{\ \mbox{\hyperlink{struct_layer_stack_a0b201eef23fdc7dfe9e2afc9ed018243}{insert}}\ =\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.begin();\ \}}
\DoxyCodeLine{00054\ \ \ \ \ \mbox{\hyperlink{struct_layer_stack_a02bea1c2ac7c027b5bd7371ec9e2bda7}{\string~LayerStack}}()\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{struct_layer}{Layer}}*\ layer\ :\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}})\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ layer;}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_layer_stack_a87da032625776caf93747c6eceec52d1}{push}}(\mbox{\hyperlink{struct_layer}{Layer}}*\ layer)\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.empty())\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.push\_back(layer);}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_layer_stack_a0b201eef23fdc7dfe9e2afc9ed018243}{insert}}\ =\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.begin();}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_layer_stack_a0b201eef23fdc7dfe9e2afc9ed018243}{insert}}\ =\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.emplace(\mbox{\hyperlink{struct_layer_stack_a0b201eef23fdc7dfe9e2afc9ed018243}{insert}},\ layer);}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00067\ \ \ \ \ \}}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_layer_stack_ab29ae8771a36b31fad64ebd64953be76}{pop}}(\mbox{\hyperlink{struct_layer}{Layer}}*\ layer)\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ std::find(\mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.begin(),\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.end(),\ layer);}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ !=\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.end())\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.erase(it);}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/\mbox{\hyperlink{struct_layer_stack_a0b201eef23fdc7dfe9e2afc9ed018243}{insert}};}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_layer_stack_a43bffea8d7134ed68b4bb05b35b73dba}{popOverlay}}(\mbox{\hyperlink{struct_layer}{Layer}}*\ layer)\ \{\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.emplace\_back(layer);\ \}}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_layer_stack_a7220ab1754290bcc23b7714a70d28187}{pushOverlay}}(\mbox{\hyperlink{struct_layer}{Layer}}*\ layer)\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ std::find(\mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.begin(),\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.end(),\ layer);}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ !=\ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.end())\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_layer_stack_ab9e9e52fe091e96240ae65dd15ab4e22}{layers}}.erase(it);}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ \};}

\end{DoxyCode}
