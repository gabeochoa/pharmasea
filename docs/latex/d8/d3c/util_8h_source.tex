\hypertarget{util_8h_source}{}\doxysection{util.\+h}
\label{util_8h_source}\index{src/util.h@{src/util.h}}
\mbox{\hyperlink{util_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#define\ \_USE\_MATH\_DEFINES\ \ }\textcolor{comment}{//\ for\ C++}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <math.h>}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <regex>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <sstream>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#define\ CONCAT\_IMPL(s1,\ s2)\ s1\#\#s2}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ CONCAT(s1,\ s2)\ CONCAT\_IMPL(s1,\ s2)}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#define\ ANONYMOUS(x)\ CONCAT(x,\ \_\_COUNTER\_\_)}}
\DoxyCodeLine{00017\ \textcolor{comment}{//\ usage:\ int\ ANONYMOUS(myvar);\ =>\ int\ myvar\_1;}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceutil}{util}}\ \{}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{template}<\textcolor{keyword}{class}...\ Ts>}
\DoxyCodeLine{00022\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structutil_1_1overloaded}{overloaded}}\ :\ Ts...\ \{}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keyword}{using\ }Ts::operator()...;}
\DoxyCodeLine{00024\ \};}
\DoxyCodeLine{00025\ \textcolor{comment}{//\ explicit\ deduction\ guide\ (not\ needed\ as\ of\ C++20)}}
\DoxyCodeLine{00026\ \textcolor{keyword}{template}<\textcolor{keyword}{class}...\ Ts>}
\DoxyCodeLine{00027\ \mbox{\hyperlink{structutil_1_1overloaded}{overloaded}}(Ts...)\ -\/>\ \mbox{\hyperlink{structutil_1_1overloaded}{overloaded}}<Ts...>;}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00030\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceutil_a7b683e51af99b005d650280fe168daec}{sgn}}(T\ val)\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordflow}{return}\ (T(0)\ <\ val)\ -\/\ (val\ <\ T(0));}
\DoxyCodeLine{00032\ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{namespaceutil_a754507833912be9c3f11ad02c3ea05f9}{deg2rad}}(\textcolor{keywordtype}{float}\ deg)\ \{}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordflow}{return}\ deg\ *\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(M\_PI)\ /\ 180.0f;}
\DoxyCodeLine{00036\ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{namespaceutil_a9305e21ff6411929f92f427a318cea17}{rad2deg}}(\textcolor{keywordtype}{float}\ rad)\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordflow}{return}\ rad\ *\ (180.f\ /\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(M\_PI));}
\DoxyCodeLine{00040\ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{static}\ std::vector<std::string>\ \mbox{\hyperlink{namespaceutil_a8d672475379879339e33f1f9dc6ea961}{split\_string}}(\textcolor{keyword}{const}\ std::string\&\ str,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ delimiter)\ \{}
\DoxyCodeLine{00044\ \ \ \ \ std::vector<std::string>\ strings;}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ std::string::size\_type\ pos\ =\ 0;}
\DoxyCodeLine{00047\ \ \ \ \ std::string::size\_type\ prev\ =\ 0;}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordflow}{while}\ ((pos\ =\ str.find(delimiter,\ prev))\ !=\ std::string::npos)\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ strings.push\_back(str.substr(prev,\ pos\ -\/\ prev));}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ prev\ =\ pos\ +\ delimiter.size();}
\DoxyCodeLine{00051\ \ \ \ \ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{comment}{//\ To\ get\ the\ last\ substring\ (or\ only,\ if\ delimiter\ is\ not\ found)}}
\DoxyCodeLine{00054\ \ \ \ \ strings.push\_back(str.substr(prev));}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{return}\ strings;}
\DoxyCodeLine{00057\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{keyword}{inline}\ std::vector<std::string>\ \mbox{\hyperlink{namespaceutil_a5f5caebc89c06dcdd631966f2ba0cb72}{split\_re}}(\textcolor{keyword}{const}\ std::string\&\ input,}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ regex)\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ passing\ -\/1\ as\ the\ submatch\ index\ parameter\ performs\ splitting}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{static}\ std::regex\ re(regex);}
\DoxyCodeLine{00063\ \ \ \ \ std::sregex\_token\_iterator\ first\{input.begin(),\ input.end(),\ re,\ -\/1\};}
\DoxyCodeLine{00064\ \ \ \ \ std::sregex\_token\_iterator\ last;}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{return}\ std::vector<std::string>\{first,\ last\};}
\DoxyCodeLine{00066\ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{namespaceutil_a5020e504940e09639480aed917da6ba1}{clamp}}(\textcolor{keywordtype}{float}\ a,\ \textcolor{keywordtype}{float}\ mn,\ \textcolor{keywordtype}{float}\ mx)\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{return}\ std::min(std::max(a,\ mn),\ mx);}
\DoxyCodeLine{00070\ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \textcolor{keyword}{template}<\textcolor{keyword}{template}<\textcolor{keyword}{typename}...>\ \textcolor{keyword}{class\ }Container,\ \textcolor{keyword}{typename}\ K,\ \textcolor{keyword}{typename}\ V,}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}...\ Ts>}
\DoxyCodeLine{00074\ \textcolor{keyword}{inline}\ V\ \mbox{\hyperlink{namespaceutil_a5fad71d00f379fced9c845d2387b5304}{map\_get\_or\_default}}(Container<K,\ V,\ Ts...>\ map,\ K\ key,\ V\ def\_value)\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordflow}{if}\ (map.contains(key))\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ map.at(key);}
\DoxyCodeLine{00077\ \ \ \ \ \}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordflow}{return}\ def\_value;}
\DoxyCodeLine{00079\ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \textcolor{comment}{//\ note:\ delimiter\ cannot\ contain\ NUL\ characters}}
\DoxyCodeLine{00082\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Range,\ \textcolor{keyword}{typename}\ Value\ =\ \textcolor{keyword}{typename}\ Range::value\_type>}
\DoxyCodeLine{00083\ [[nodiscard]]\ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{namespaceutil_ad3415a1a5060095ee99c99b3aa7a707f}{join}}(Range\ \textcolor{keyword}{const}\&\ elements,}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \textcolor{keyword}{const}\ delimiter)\ \{}
\DoxyCodeLine{00085\ \ \ \ \ std::ostringstream\ os;}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keyword}{auto}\ b\ =\ begin(elements),\ e\ =\ end(elements);}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordflow}{if}\ (b\ !=\ e)\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ std::copy(b,\ prev(e),\ std::ostream\_iterator<Value>(os,\ delimiter));}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ b\ =\ prev(e);}
\DoxyCodeLine{00090\ \ \ \ \ \}}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordflow}{if}\ (b\ !=\ e)\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ os\ <<\ *b;}
\DoxyCodeLine{00093\ \ \ \ \ \}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{return}\ os.str();}
\DoxyCodeLine{00095\ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ [[nodiscard]]\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceutil_af5b41133c9803397e0ac6ceae24431b2}{words\_in\_string}}(\textcolor{keyword}{const}\ std::string\&\ str)\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ count\ =\ (int)\ std::count\_if(str.begin(),\ str.end(),}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](\textcolor{keywordtype}{char}\ i)\ \{\ \textcolor{keywordflow}{return}\ i\ ==\ \textcolor{charliteral}{'\ '};\ \});}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordflow}{return}\ count;}
\DoxyCodeLine{00101\ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \}\ \ \textcolor{comment}{//\ namespace\ util}}

\end{DoxyCode}
