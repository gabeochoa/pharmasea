\hypertarget{item_8h_source}{}\doxysection{item.\+h}
\label{item_8h_source}\index{src/item.h@{src/item.h}}
\mbox{\hyperlink{item_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{external__include_8h}{external\_include.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{comment}{//}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{engine_8h}{engine.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{model__library_8h}{engine/model\_library.h}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{random_8h}{engine/random.h}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{globals_8h}{globals.h}}"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}raylib.h"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{vec__util_8h}{vec\_util.h}}"{}}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{static}\ std::atomic\_int\ \mbox{\hyperlink{item_8h_a26702aa361e96e06f946b2c2864bd231}{ITEM\_ID\_GEN}}\ =\ 0;}
\DoxyCodeLine{00013\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_item}{Item}}\ \{}
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keyword}{enum}\ \mbox{\hyperlink{struct_item_a7bbff5c89eda76d407fda7acbb7e2313}{HeldBy}}\ \{\ \mbox{\hyperlink{struct_item_a7bbff5c89eda76d407fda7acbb7e2313a238dfba9b1b1077df2b9d4281d305ad7}{NONE}},\ \mbox{\hyperlink{struct_item_a7bbff5c89eda76d407fda7acbb7e2313aead1b164bfce2586f784f684ff72d509}{ITEM}},\ \mbox{\hyperlink{struct_item_a7bbff5c89eda76d407fda7acbb7e2313aaca7714ebc132e0fb559664bbe96c552}{PLAYER}},\ \mbox{\hyperlink{struct_item_a7bbff5c89eda76d407fda7acbb7e2313a3b28b7d1ed305505eee86fbfd5327fc5}{FURNITURE}},\ \mbox{\hyperlink{struct_item_a7bbff5c89eda76d407fda7acbb7e2313a11bd9eb4b8674d3bdbe31462f417a852}{CUSTOMER}}\ \};}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_item_ae901ac3ab2273113f746340a7db4e388}{id}};}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_item_a5b372513381b796a0c9d947998695978}{item\_size}}\ =\ \mbox{\hyperlink{globals_8h_af3c09b249c48587aba215cce49091fa0}{TILESIZE}}\ /\ 2;}
\DoxyCodeLine{00018\ \ \ \ \ Color\ \mbox{\hyperlink{struct_item_a0b8a557de8ba01a3a0702a04bc14f60c}{color}};}
\DoxyCodeLine{00019\ \ \ \ \ \mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}}\ \mbox{\hyperlink{struct_item_ab8f08a383347341fe2eba43cdbfa7dd3}{raw\_position}};}
\DoxyCodeLine{00020\ \ \ \ \ \mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}}\ \mbox{\hyperlink{struct_item_aa59326bb87cffcdcf4e7ca6715566b6f}{position}};}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_item_aa562c5ebe71449db708de075236c0d5e}{cleanup}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00022\ \ \ \ \ \mbox{\hyperlink{struct_item_a7bbff5c89eda76d407fda7acbb7e2313}{HeldBy}}\ \mbox{\hyperlink{struct_item_a0eb98a0db3e8e4e6e4b94d92c53f175b}{held\_by}}\ =\ \mbox{\hyperlink{struct_item_a7bbff5c89eda76d407fda7acbb7e2313a238dfba9b1b1077df2b9d4281d305ad7}{NONE}};}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{comment}{//\ TODO\ Are\ there\ likely\ to\ be\ other\ items\ that\ can\ hold\ items?}}
\DoxyCodeLine{00025\ \ \ \ \ std::shared\_ptr<Item>\ \mbox{\hyperlink{struct_item_a24622ff456a347d704ac2cc38f922905}{held\_item}};}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{friend}\ bitsery::Access;}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ S>}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_item_a1c17f605686c5949d22c4e82bede448d}{serialize}}(S\&\ s)\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ s.value4b(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ s.value4b(\mbox{\hyperlink{struct_item_a5b372513381b796a0c9d947998695978}{item\_size}});}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ s.object(\mbox{\hyperlink{struct_item_a0b8a557de8ba01a3a0702a04bc14f60c}{color}});}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ s.object(\mbox{\hyperlink{struct_item_ab8f08a383347341fe2eba43cdbfa7dd3}{raw\_position}});}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ s.object(\mbox{\hyperlink{struct_item_aa59326bb87cffcdcf4e7ca6715566b6f}{position}});}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ s.value1b(\mbox{\hyperlink{struct_item_aa562c5ebe71449db708de075236c0d5e}{cleanup}});}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ s.value4b(\mbox{\hyperlink{struct_item_a0eb98a0db3e8e4e6e4b94d92c53f175b}{held\_by}});}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ s.object(\mbox{\hyperlink{struct_item_a24622ff456a347d704ac2cc38f922905}{held\_item}});}
\DoxyCodeLine{00039\ \ \ \ \ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{struct_item_a297720c02984eab37332ae795d22189d}{Item}}()\ \{\}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00045\ \ \ \ \ \mbox{\hyperlink{struct_item_ace3c0716c9ce027c08002c6e997438f3}{Item}}(\mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}}\ p,\ Color\ c)\ :\ \mbox{\hyperlink{struct_item_ae901ac3ab2273113f746340a7db4e388}{id}}(\mbox{\hyperlink{item_8h_a26702aa361e96e06f946b2c2864bd231}{ITEM\_ID\_GEN}}++),\ \mbox{\hyperlink{struct_item_a0b8a557de8ba01a3a0702a04bc14f60c}{color}}(c),\ \mbox{\hyperlink{struct_item_ab8f08a383347341fe2eba43cdbfa7dd3}{raw\_position}}(p)\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ this-\/>position\ =\ this-\/>\mbox{\hyperlink{struct_item_a3a2607e15ddf8c337bc7480cadccf307}{snap\_position}}();}
\DoxyCodeLine{00047\ \ \ \ \ \}}
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{struct_item_a60a2714859cc1fb2259041b709c17919}{Item}}(\mbox{\hyperlink{graphics_8h_acf64f2c7361f0fc6883a80cb1d698f28}{vec2}}\ p,\ Color\ c)}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{struct_item_ae901ac3ab2273113f746340a7db4e388}{id}}(\mbox{\hyperlink{item_8h_a26702aa361e96e06f946b2c2864bd231}{ITEM\_ID\_GEN}}++),\ \mbox{\hyperlink{struct_item_a0b8a557de8ba01a3a0702a04bc14f60c}{color}}(c),\ \mbox{\hyperlink{struct_item_ab8f08a383347341fe2eba43cdbfa7dd3}{raw\_position}}(\{p.x,\ 0,\ p.y\})\ \{}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ this-\/>position\ =\ this-\/>\mbox{\hyperlink{struct_item_a3a2607e15ddf8c337bc7480cadccf307}{snap\_position}}();}
\DoxyCodeLine{00051\ \ \ \ \ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{struct_item_a33cc9c0bc556b5a33a9d0d58d37c602b}{\string~Item}}()\ \{\}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}}\ \mbox{\hyperlink{struct_item_a3a2607e15ddf8c337bc7480cadccf307}{snap\_position}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacevec_a5a3a9e37c6f80541240d5cb6cdb4fd4e}{vec::snap}}(this-\/>raw\_position);\ \}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_item_a1774f336ba7426c027ace19df8eebf2a}{is\_collidable}}()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}}\ \mbox{\hyperlink{struct_item_a44db496c8de100b4f6e9bb7e546b0b4f}{model\_scale}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \{0.5f,\ 0.5f,\ 0.5f\};\ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_item_ade8311a0bcadd6d8d30641868f851d8e}{render}}(\textcolor{keywordtype}{bool}\ render\_held\_item\ =\ \textcolor{keyword}{true})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Dont\ render\ when\ held\ by\ another\ item}}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ but\ do\ render\ if\ we\ are\ being\ rendered\ by\ our\ parent}}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{struct_item_a0eb98a0db3e8e4e6e4b94d92c53f175b}{held\_by}}\ ==\ \mbox{\hyperlink{struct_item_a7bbff5c89eda76d407fda7acbb7e2313aead1b164bfce2586f784f684ff72d509}{HeldBy::ITEM}}\ \&\&\ !render\_held\_item)\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>\mbox{\hyperlink{struct_item_a0e3e9361df9d2b0071299c51a642c528}{model}}().has\_value())\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ sz\ =\ this-\/>\mbox{\hyperlink{struct_item_a325a03f663374790e5ffc0b51f08683b}{size}}();}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ m\_sc\ =\ this-\/>\mbox{\hyperlink{struct_item_a44db496c8de100b4f6e9bb7e546b0b4f}{model\_scale}}();}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}}\ scale\ =\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sz.x\ *\ m\_sc.x,}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sz.y\ *\ m\_sc.y,}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sz.z\ *\ m\_sc.z,}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ raylib::DrawModelEx(this-\/>\mbox{\hyperlink{struct_item_a0e3e9361df9d2b0071299c51a642c528}{model}}().value(),\ this-\/>position,}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{0,\ 1.f,\ 0\},\ 0\ \textcolor{comment}{/*\ rotation\ angle\ */},\ scale,}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceui_1_1color_ab3981d4504b439492296189f2532b8c6}{ui::color::white}});}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ raylib::DrawCube(\mbox{\hyperlink{struct_item_aa59326bb87cffcdcf4e7ca6715566b6f}{position}},\ this-\/>\mbox{\hyperlink{struct_item_a325a03f663374790e5ffc0b51f08683b}{size}}().x,\ this-\/>\mbox{\hyperlink{struct_item_a325a03f663374790e5ffc0b51f08683b}{size}}().y,}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{struct_item_a325a03f663374790e5ffc0b51f08683b}{size}}().z,\ this-\/>color);}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>held\_item\ !=\ \textcolor{keyword}{nullptr}\ \&\&\ render\_held\_item)\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>held\_item-\/>render(\textcolor{keyword}{false});}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00087\ \ \ \ \ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_item_a04839eb08885c4f89378e636cc9df27f}{update\_position}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}}\&\ p)\ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ this-\/>position\ =\ p;}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>held\_item\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>held\_item-\/>update\_position(p);}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00094\ \ \ \ \ \}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keyword}{virtual}\ BoundingBox\ \mbox{\hyperlink{struct_item_a6b50c8e2df7d6031f59ead493f544f03}{bounds}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{vec__util_8h_a7bc0ade59022f5ab1ebe03a4d6cee6aa}{get\_bounds}}(this-\/>position,\ this-\/>\mbox{\hyperlink{struct_item_a325a03f663374790e5ffc0b51f08683b}{size}}()\ /\ 2.0f);}
\DoxyCodeLine{00098\ \ \ \ \ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}}\ \mbox{\hyperlink{struct_item_a325a03f663374790e5ffc0b51f08683b}{size}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}})\{\mbox{\hyperlink{struct_item_a5b372513381b796a0c9d947998695978}{item\_size}},\ \mbox{\hyperlink{struct_item_a5b372513381b796a0c9d947998695978}{item\_size}},\ \mbox{\hyperlink{struct_item_a5b372513381b796a0c9d947998695978}{item\_size}}\};}
\DoxyCodeLine{00102\ \ \ \ \ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keyword}{virtual}\ BoundingBox\ \mbox{\hyperlink{struct_item_a3a59ef91c6a7308e3d681740613ad06b}{raw\_bounds}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{vec__util_8h_a7bc0ade59022f5ab1ebe03a4d6cee6aa}{get\_bounds}}(this-\/>raw\_position,\ this-\/>\mbox{\hyperlink{struct_item_a325a03f663374790e5ffc0b51f08683b}{size}}());}
\DoxyCodeLine{00106\ \ \ \ \ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_item_a33316076fcf65a5eb36d8bd5d8cf3047}{collides}}(BoundingBox\ b)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ raylib::CheckCollisionBoxes(this-\/>\mbox{\hyperlink{struct_item_a6b50c8e2df7d6031f59ead493f544f03}{bounds}}(),\ b);}
\DoxyCodeLine{00110\ \ \ \ \ \}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keyword}{virtual}\ std::optional<raylib::Model>\ \mbox{\hyperlink{struct_item_a0e3e9361df9d2b0071299c51a642c528}{model}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \{\};\ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{comment}{//\ TODO\ maybe\ use\ tl::expected\ for\ this?}}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_item_a041b916a0c1b4feb83b0a55e97d3fded}{eat}}(std::shared\_ptr<Item>\ item)\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{struct_item_a182f7bac8365029d055b04e279981a82}{can\_eat}}(item))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ this-\/>held\_item\ =\ item;}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ item-\/>held\_by\ =\ \mbox{\hyperlink{struct_item_a7bbff5c89eda76d407fda7acbb7e2313aead1b164bfce2586f784f684ff72d509}{Item::HeldBy::ITEM}};}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00122\ \ \ \ \ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_item_a182f7bac8365029d055b04e279981a82}{can\_eat}}(std::shared\_ptr<Item>\ item)\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{struct_item_a523767b015090eca0c122605de78c846}{has\_holding\_ability}}())\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{log_8h_aa1cfe5444875c8eca0ea6f6993977d6d}{log\_info}}(\textcolor{stringliteral}{"{}cant\ eat\ because\ we\ cant\ hold\ things"{}});}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Note;\ this\ is\ done\ here\ to\ avoid\ -\/Wpotentially-\/evaluated-\/expression}}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ warning}}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ underlying\ =\ *item;}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{typeid}(underlying)\ ==\ \textcolor{keyword}{typeid}(*\textcolor{keyword}{this}))\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{log_8h_aa1cfe5444875c8eca0ea6f6993977d6d}{log\_info}}(\textcolor{stringliteral}{"{}cant\ put\ an\ item\ into\ an\ item\ of\ the\ same\ type"{}});}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{struct_item_a87521e07ad9e083fa892d52880ce67c5}{empty}}())\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{log_8h_aa1cfe5444875c8eca0ea6f6993977d6d}{log\_info}}(\textcolor{stringliteral}{"{}cant\ put\ an\ item\ into\ because\ we\ are\ full"{}});}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO\ we\ will\ eventually\ need\ a\ way\ to\ validate\ the\ kinds\ of\ items}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ ItemContainer\ can\ hold}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00143\ \ \ \ \ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_item_a523767b015090eca0c122605de78c846}{has\_holding\_ability}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_item_a87521e07ad9e083fa892d52880ce67c5}{empty}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_item_a523767b015090eca0c122605de78c846}{has\_holding\_ability}}()\ \&\&\ \mbox{\hyperlink{struct_item_a24622ff456a347d704ac2cc38f922905}{held\_item}}\ ==\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00149\ \ \ \ \ \}}
\DoxyCodeLine{00150\ \};}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacebitsery}{bitsery}}\ \{}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ S>}
\DoxyCodeLine{00155\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacebitsery_a1090e6e410c14fa09ef29c2eb6b1f3af}{serialize}}(S\&\ s,\ std::shared\_ptr<Item>\&\ item)\ \{}
\DoxyCodeLine{00156\ \ \ \ \ s.ext(item,\ bitsery::ext::StdSmartPtr\{\});}
\DoxyCodeLine{00157\ \}}
\DoxyCodeLine{00158\ \}\ \ \textcolor{comment}{//\ namespace\ bitsery}}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_pill}{Pill}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{struct_item}{Item}}\ \{}
\DoxyCodeLine{00161\ \ \ \ \ \textcolor{keyword}{enum\ struct}\ \mbox{\hyperlink{struct_pill_a541adada380f2ffdc6aae0636423d114}{PillType}}\ \{}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_pill_a541adada380f2ffdc6aae0636423d114aee38e4d5dd68c4e440825018d549cb47}{Red}},}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_pill_a541adada380f2ffdc6aae0636423d114ac7a39e7eb165a28ccbf43da08afe7651}{RedLong}},}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_pill_a541adada380f2ffdc6aae0636423d114a9594eec95be70e7b1710f730fdda33d9}{Blue}},}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_pill_a541adada380f2ffdc6aae0636423d114a23210c6230517c00439c0f3a7301a968}{BlueLong}},}
\DoxyCodeLine{00166\ \ \ \ \ \}\ \mbox{\hyperlink{struct_pill_a85ee79b2713671d19be803d5999250a2}{type}};}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keyword}{friend}\ bitsery::Access;}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ S>}
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_pill_ae7523079b9c6599723a06760356c0f62}{serialize}}(S\&\ s)\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ s.ext(*\textcolor{keyword}{this},\ bitsery::ext::BaseClass<Item>\{\});}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ s.value4b(\mbox{\hyperlink{struct_pill_a85ee79b2713671d19be803d5999250a2}{type}});}
\DoxyCodeLine{00174\ \ \ \ \ \}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00177\ \ \ \ \ \mbox{\hyperlink{struct_pill_a587fedaf245b1bde2fb5fb304eb7a120}{Pill}}()\ \{\ \mbox{\hyperlink{struct_pill_aa6e10e02d49a8df3598a940a12b648d8}{init}}();\ \}}
\DoxyCodeLine{00178\ \ \ \ \ \mbox{\hyperlink{struct_pill_a04e66b101b42aafa13f6f91036e3e1d4}{Pill}}(\mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}}\ p,\ Color\ c)\ :\ \mbox{\hyperlink{struct_item}{Item}}(p,\ c)\ \{\ \mbox{\hyperlink{struct_pill_aa6e10e02d49a8df3598a940a12b648d8}{init}}();\ \}}
\DoxyCodeLine{00179\ \ \ \ \ \mbox{\hyperlink{struct_pill_ad5f4f40b05fb82729a266cbe60fc3fc3}{Pill}}(\mbox{\hyperlink{graphics_8h_acf64f2c7361f0fc6883a80cb1d698f28}{vec2}}\ p,\ Color\ c)\ :\ \mbox{\hyperlink{struct_item}{Item}}(p,\ c)\ \{\ \mbox{\hyperlink{struct_pill_aa6e10e02d49a8df3598a940a12b648d8}{init}}();\ \}}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_pill_aa6e10e02d49a8df3598a940a12b648d8}{init}}()\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ std::size\_t\ num\_pills\ =\ magic\_enum::enum\_count<PillType>();}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ \mbox{\hyperlink{random_8h_ac595cabd40bee1b9e1c604ea389dc528}{randIn}}(0,\ num\_pills\ -\/\ 1);}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_pill_a85ee79b2713671d19be803d5999250a2}{type}}\ =\ magic\_enum::enum\_value<PillType>(index);}
\DoxyCodeLine{00185\ \ \ \ \ \}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}}\ \mbox{\hyperlink{struct_pill_ab48d7f73a0c8367132397426da37d537}{model\_scale}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \{3.f,\ 3.0f,\ 12.f\};\ \}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keyword}{virtual}\ std::optional<raylib::Model>\ \mbox{\hyperlink{struct_pill_a1845531ad3711bfe9584ca2825979400}{model}}()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{struct_pill_a85ee79b2713671d19be803d5999250a2}{type}})\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{struct_pill_a541adada380f2ffdc6aae0636423d114aee38e4d5dd68c4e440825018d549cb47}{PillType::Red}}:}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_model_library_aaddbbb2eda8f0ea544bd1e3d8e5b5eec}{ModelLibrary::get}}().get(\textcolor{stringliteral}{"{}pill\_red"{}});}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{struct_pill_a541adada380f2ffdc6aae0636423d114ac7a39e7eb165a28ccbf43da08afe7651}{PillType::RedLong}}:}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_model_library_aaddbbb2eda8f0ea544bd1e3d8e5b5eec}{ModelLibrary::get}}().get(\textcolor{stringliteral}{"{}pill\_redlong"{}});}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{struct_pill_a541adada380f2ffdc6aae0636423d114a9594eec95be70e7b1710f730fdda33d9}{PillType::Blue}}:}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_model_library_aaddbbb2eda8f0ea544bd1e3d8e5b5eec}{ModelLibrary::get}}().get(\textcolor{stringliteral}{"{}pill\_blue"{}});}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{struct_pill_a541adada380f2ffdc6aae0636423d114a23210c6230517c00439c0f3a7301a968}{PillType::BlueLong}}:}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_model_library_aaddbbb2eda8f0ea544bd1e3d8e5b5eec}{ModelLibrary::get}}().get(\textcolor{stringliteral}{"{}pill\_bluelong"{}});}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{log_8h_a04af09851c431d178f16b24fa1aac1e9}{log\_warn}}(\textcolor{stringliteral}{"{}Failed\ to\ get\ matching\ model\ for\ pill\ type:\ \{\}"{}},}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ magic\_enum::enum\_name(\mbox{\hyperlink{struct_pill_a85ee79b2713671d19be803d5999250a2}{type}}));}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00203\ \ \ \ \ \}}
\DoxyCodeLine{00204\ \};}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_pill_bottle}{PillBottle}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{struct_item}{Item}}\ \{}
\DoxyCodeLine{00207\ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keyword}{friend}\ bitsery::Access;}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ S>}
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_pill_bottle_a56a0cef30520622f896f2a7eda7a6b5d}{serialize}}(S\&\ s)\ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ s.ext(*\textcolor{keyword}{this},\ bitsery::ext::BaseClass<Item>\{\});}
\DoxyCodeLine{00212\ \ \ \ \ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00215\ \ \ \ \ \mbox{\hyperlink{struct_pill_bottle_a2636f2d267b0e28a1fae7176f0645c20}{PillBottle}}()\ \{\}}
\DoxyCodeLine{00216\ \ \ \ \ \mbox{\hyperlink{struct_pill_bottle_a9fe772b326eccf1ce640a998b98d533f}{PillBottle}}(\mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}}\ p,\ Color\ c)\ :\ \mbox{\hyperlink{struct_item}{Item}}(p,\ c)\ \{\}}
\DoxyCodeLine{00217\ \ \ \ \ \mbox{\hyperlink{struct_pill_bottle_a8a7055a72296bd56d6a80b4a93f17698}{PillBottle}}(\mbox{\hyperlink{graphics_8h_acf64f2c7361f0fc6883a80cb1d698f28}{vec2}}\ p,\ Color\ c)\ :\ \mbox{\hyperlink{struct_item}{Item}}(p,\ c)\ \{\}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}}\ \mbox{\hyperlink{struct_pill_bottle_a38b4376e4d4994c9ac5728d1cb5fdd1f}{model\_scale}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \{3.f,\ 3.0f,\ 3.f\};\ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keyword}{virtual}\ std::optional<raylib::Model>\ \mbox{\hyperlink{struct_pill_bottle_af35a71525e73cf47dc4249f6995ba884}{model}}()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO\ handle\ empty\ vs\ full}}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_model_library_aaddbbb2eda8f0ea544bd1e3d8e5b5eec}{ModelLibrary::get}}().get(\textcolor{stringliteral}{"{}pill\_bottle"{}});}
\DoxyCodeLine{00224\ \ \ \ \ \}}
\DoxyCodeLine{00225\ \};}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_bag}{Bag}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{struct_item}{Item}}\ \{}
\DoxyCodeLine{00228\ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keyword}{friend}\ bitsery::Access;}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ S>}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_bag_ad73585a42bc05f93b7c716188e8b6674}{serialize}}(S\&\ s)\ \{}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ s.ext(*\textcolor{keyword}{this},\ bitsery::ext::BaseClass<Item>\{\});}
\DoxyCodeLine{00233\ \ \ \ \ \}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00236\ \ \ \ \ \mbox{\hyperlink{struct_bag_ae0593c22c7dd8b32cab469af92fb200c}{Bag}}()\ \{\}}
\DoxyCodeLine{00237\ \ \ \ \ \mbox{\hyperlink{struct_bag_a5c00a1e15483889c31a6a6231dce53ae}{Bag}}(\mbox{\hyperlink{graphics_8h_a308f9233b868e4e52062de502c3d9cef}{vec3}}\ p,\ Color\ c)\ :\ \mbox{\hyperlink{struct_item}{Item}}(p,\ c)\ \{\}}
\DoxyCodeLine{00238\ \ \ \ \ \mbox{\hyperlink{struct_bag_a02b61c1c53e9adec80865ff59be0af50}{Bag}}(\mbox{\hyperlink{graphics_8h_acf64f2c7361f0fc6883a80cb1d698f28}{vec2}}\ p,\ Color\ c)\ :\ \mbox{\hyperlink{struct_item}{Item}}(p,\ c)\ \{\}}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_bag_ac8a55c4ee9e9f6e95425bf9b0a5901c8}{has\_holding\_ability}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ \textcolor{keyword}{virtual}\ std::optional<raylib::Model>\ \mbox{\hyperlink{struct_bag_ad66adfe94f97d7f5da10da2769049d8e}{model}}()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{struct_item_a87521e07ad9e083fa892d52880ce67c5}{empty}}())\ \{}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_model_library_aaddbbb2eda8f0ea544bd1e3d8e5b5eec}{ModelLibrary::get}}().get(\textcolor{stringliteral}{"{}empty\_bag"{}});}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_model_library_aaddbbb2eda8f0ea544bd1e3d8e5b5eec}{ModelLibrary::get}}().get(\textcolor{stringliteral}{"{}bag"{}});}
\DoxyCodeLine{00247\ \ \ \ \ \}}
\DoxyCodeLine{00248\ \};}

\end{DoxyCode}
