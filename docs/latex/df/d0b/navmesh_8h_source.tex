\hypertarget{navmesh_8h_source}{}\doxysection{navmesh.\+h}
\label{navmesh_8h_source}\index{src/engine/navmesh.h@{src/engine/navmesh.h}}
\mbox{\hyperlink{navmesh_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{external__include_8h}{external\_include.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{comment}{//}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{polygon_8h}{polygon.h}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_nav_mesh}{NavMesh}}\ \{}
\DoxyCodeLine{00009\ \ \ \ \ std::map<int,\ Polygon>\ \mbox{\hyperlink{struct_nav_mesh_a55a626238a827a5f1c908ac3c1e96bd9}{entityShapes}};}
\DoxyCodeLine{00010\ \ \ \ \ std::vector<Polygon>\ \mbox{\hyperlink{struct_nav_mesh_a4748a5ee71d20c52526c4a410b8cfd94}{shapes}};}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_nav_mesh_a5827173f76dd391aa2bd5c9d320e3c78}{addEntity}}(\textcolor{keywordtype}{int}\ e\_id,\ \mbox{\hyperlink{struct_polygon}{Polygon}}\ p)\ \{\ \mbox{\hyperlink{struct_nav_mesh_a55a626238a827a5f1c908ac3c1e96bd9}{entityShapes}}.insert(\{e\_id,\ p\});\ \}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_nav_mesh_ad58120b53e0209131f8c37bff58ceff7}{removeEntity}}(\textcolor{keywordtype}{int}\ e\_id)\ \{}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{struct_nav_mesh_a55a626238a827a5f1c908ac3c1e96bd9}{entityShapes}}.find(e\_id);}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ !=\ \mbox{\hyperlink{struct_nav_mesh_a55a626238a827a5f1c908ac3c1e96bd9}{entityShapes}}.end())\ \mbox{\hyperlink{struct_nav_mesh_a55a626238a827a5f1c908ac3c1e96bd9}{entityShapes}}.erase(it);}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00018\ \ \ \ \ \}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_nav_mesh_a713a14abb62adf9b3b687d613825bf38}{addShape}}(\mbox{\hyperlink{struct_polygon}{Polygon}}\ p,\ \textcolor{keywordtype}{bool}\ merge\ =\ \textcolor{keyword}{true})\ \{}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_nav_mesh_a4748a5ee71d20c52526c4a410b8cfd94}{shapes}}.push\_back(p);}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!merge)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ i\ =\ 0;}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ j\ =\ 1;}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (i\ <\ \mbox{\hyperlink{struct_nav_mesh_a4748a5ee71d20c52526c4a410b8cfd94}{shapes}}.size())\ \{}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \ \ \ \ j\ =\ i\ +\ 1;}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (j\ <\ \mbox{\hyperlink{struct_nav_mesh_a4748a5ee71d20c52526c4a410b8cfd94}{shapes}}.size())\ \{}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{struct_nav_mesh_a8b1a354daf4fc1fee4c1a9dc0b4f3d96}{overlap}}(\mbox{\hyperlink{struct_nav_mesh_a4748a5ee71d20c52526c4a410b8cfd94}{shapes}}[i],\ \mbox{\hyperlink{struct_nav_mesh_a4748a5ee71d20c52526c4a410b8cfd94}{shapes}}[j]))\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ pt\ :\ \mbox{\hyperlink{struct_nav_mesh_a4748a5ee71d20c52526c4a410b8cfd94}{shapes}}[j].points)\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_nav_mesh_a4748a5ee71d20c52526c4a410b8cfd94}{shapes}}[i].add(pt);}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_nav_mesh_a4748a5ee71d20c52526c4a410b8cfd94}{shapes}}.erase(\mbox{\hyperlink{struct_nav_mesh_a4748a5ee71d20c52526c4a410b8cfd94}{shapes}}.begin()\ +\ j);}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ j++;}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ i++;}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00041\ \ \ \ \ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{struct_nav_mesh_a4536c9dc51a66a6700ba2ce4009a19ec}{removeShape}}(\mbox{\hyperlink{struct_polygon}{Polygon}}\ p)\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO\ this\ might\ split\ the\ shape\ in\ two}}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ how\ do\ we\ figure\ out\ if\ we\ need\ to\ split\ ...}}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ s\ :\ \mbox{\hyperlink{struct_nav_mesh_a4748a5ee71d20c52526c4a410b8cfd94}{shapes}})\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{struct_nav_mesh_a8b1a354daf4fc1fee4c1a9dc0b4f3d96}{overlap}}(s,\ p))\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ pt\ :\ p.points)\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ s.remove(pt);}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00053\ \ \ \ \ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_nav_mesh_a8b1a354daf4fc1fee4c1a9dc0b4f3d96}{overlap}}(\mbox{\hyperlink{struct_polygon}{Polygon}}\ a,\ \mbox{\hyperlink{struct_polygon}{Polygon}}\ b)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ first\ check\ if\ the\ two\ max\ radii\ circles\ overlap}}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ a.\mbox{\hyperlink{struct_polygon_acd5fb195a0b97eb90930119da68ccd86}{points}}.size();\ i++)\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (b.\mbox{\hyperlink{struct_polygon_a513383439a27f8760f9a871e22125ade}{inside}}(a.\mbox{\hyperlink{struct_polygon_acd5fb195a0b97eb90930119da68ccd86}{points}}[i]))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00061\ \ \ \ \ \}}
\DoxyCodeLine{00062\ \};}
\DoxyCodeLine{00063\ \textcolor{keyword}{static}\ \mbox{\hyperlink{struct_nav_mesh}{NavMesh}}\ \mbox{\hyperlink{navmesh_8h_a71337971bfeaccabfe71a76621a21499}{\_\_navmesh\_\_\_DO\_NOT\_USE\_DIRECTLY}};}

\end{DoxyCode}
